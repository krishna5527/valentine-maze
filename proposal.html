<!DOCTYPE html>
<html>
<head>
  <title>Will You Be My Valentine? üíñ</title>

  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #ffe6f0;
      font-family: 'Quicksand', sans-serif;
      overflow: hidden;
      position: relative;
    }

    #fade-overlay {
      position: fixed;
      inset: 0;
      background: black;
      z-index: 9999;
      transition: opacity 2s ease;
    }

    .container {
      background: white;
      padding: 70px 60px 50px 60px;
      border-radius: 30px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0,0,0,0.15);
      position: relative;
      animation: popIn 0.8s ease;
    }

    @keyframes popIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .propose-gif {
      position: absolute;
      top: -140px;
      left: 50%;
      transform: translateX(-50%);
      width: 180px;
    }

    h1 {
      font-family: 'Pacifico', cursive;
      font-size: 38px;
      color: #ff4d88;
      margin-bottom: 40px;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 50px;
    }

    button {
      padding: 14px 45px;
      font-size: 18px;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 700;
      position: relative;
      z-index: 10000;
    }

    #yesBtn {
      background: #ff4d88;
      color: white;
      box-shadow: 0 6px 15px rgba(255,77,136,0.4);
    }

    #yesBtn:hover {
      transform: scale(1.1);
    }

    #noBtn {
      background: #ffd6e7;
      color: #d63384;
      box-shadow: 0 6px 15px rgba(214,51,132,0.25);
    }

    #noBtn:hover {
      background: #ffb3d1;
    }

    /* üéä Confetti */
    .confetti {
      position: fixed;
      width: 10px;
      height: 14px;
      top: -20px;
      opacity: 0.9;
      z-index: 99999;
      animation: fall linear forwards;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(720deg);
      }
    }
  </style>
</head>

<body>

<div id="fade-overlay"></div>

<div class="container">
  <img src="propose.gif" class="propose-gif">
  <h1>Will You Be My Valentine? üíñ</h1>

  <div class="buttons">
    <button id="yesBtn">Yes üíï</button>
    <button id="noBtn">No üôà</button>
  </div>
</div>

<script>
/* ================= FADE FROM MAZE ================= */
window.addEventListener("load", () => {
  const overlay = document.getElementById("fade-overlay");
  setTimeout(() => {
    overlay.style.opacity = "0";
    setTimeout(() => overlay.remove(), 2000);
  }, 200);
});

/* ================= SETUP ================= */
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const container = document.querySelector(".container");
const proposeGif = document.querySelector(".propose-gif");

const reactionGifs = [
  "dudusaysno1.gif",
  "dudusaysno2.gif",
  "dudusaysno3.gif"
];

const noAudio = new Audio("noaudio.mp3");
noAudio.preload = "auto";

let audioUnlocked = false;
let reactionIndex = 0;
let isAnimating = false;

/* ================= AUDIO UNLOCK ================= */
function unlockAudio() {
  if (audioUnlocked) return;

  noAudio.play().then(() => {
    noAudio.pause();
    noAudio.currentTime = 0;
    audioUnlocked = true;
  }).catch(() => {});

  document.removeEventListener("click", unlockAudio);
  document.removeEventListener("keydown", unlockAudio);
  document.removeEventListener("touchstart", unlockAudio);
}

document.addEventListener("click", unlockAudio);
document.addEventListener("keydown", unlockAudio);
document.addEventListener("touchstart", unlockAudio);

/* ================= NO BUTTON ================= */
noBtn.addEventListener("mouseenter", () => {

  if (isAnimating) return;
  isAnimating = true;
  noBtn.style.pointerEvents = "none";

  const boxRect = container.getBoundingClientRect();
  const gifRect = proposeGif.getBoundingClientRect();

  const btnWidth = noBtn.offsetWidth;
  const btnHeight = noBtn.offsetHeight;

  const reactionHeight = 160;
  const reactionOffset = 120;

  let randomX, randomY, validPosition = false;

  while (!validPosition) {

    randomX = Math.random() * (window.innerWidth - btnWidth);
    randomY = Math.random() * (window.innerHeight - btnHeight);

    const wrapperTop = randomY - reactionOffset;
    const wrapperBottom = wrapperTop + reactionHeight;
    const wrapperLeft = randomX;
    const wrapperRight = randomX + btnWidth;

    const insideScreen =
      wrapperTop >= 0 &&
      wrapperBottom <= window.innerHeight &&
      wrapperLeft >= 0 &&
      wrapperRight <= window.innerWidth;

    const overlapsBox = !(
      wrapperRight < boxRect.left ||
      wrapperLeft > boxRect.right ||
      wrapperBottom < boxRect.top ||
      wrapperTop > boxRect.bottom
    );

    const overlapsProposeGif = !(
      wrapperRight < gifRect.left ||
      wrapperLeft > gifRect.right ||
      wrapperBottom < gifRect.top ||
      wrapperTop > gifRect.bottom
    );

    if (insideScreen && !overlapsBox && !overlapsProposeGif) {
      validPosition = true;
    }
  }

  noBtn.style.position = "fixed";
  noBtn.style.left = randomX + "px";
  noBtn.style.top = randomY + "px";

  const wrapper = document.createElement("div");
  wrapper.style.position = "fixed";
  wrapper.style.left = randomX + "px";
  wrapper.style.top = (randomY - reactionOffset) + "px";
  wrapper.style.width = btnWidth + "px";
  wrapper.style.height = reactionHeight + "px";
  wrapper.style.overflow = "hidden";
  wrapper.style.pointerEvents = "none";
  wrapper.style.zIndex = "9998";

  const reaction = document.createElement("img");
  reaction.src = reactionGifs[reactionIndex];
  reaction.style.position = "absolute";
  reaction.style.width = btnWidth + "px";
  reaction.style.top = reactionOffset + "px";
  reaction.style.transition = "top 0.6s ease";

  wrapper.appendChild(reaction);
  document.body.appendChild(wrapper);

  setTimeout(() => {
    if (audioUnlocked) {
      noAudio.currentTime = 0;
      noAudio.play().catch(()=>{});
    }
    reaction.style.top = "0px";
  }, 50);

  setTimeout(() => reaction.style.top = reactionOffset + "px", 1700);

  setTimeout(() => {
    wrapper.remove();
    noAudio.pause();
    noAudio.currentTime = 0;
    noBtn.style.pointerEvents = "auto";
    isAnimating = false;
  }, 2400);

  reactionIndex = (reactionIndex + 1) % reactionGifs.length;
});

/* ================= YES BUTTON ================= */
yesBtn.addEventListener("click", () => {

  /* üî• Hide buttons immediately */
  yesBtn.style.display = "none";
  noBtn.style.display = "none";

  /* üéµ Play yayy 3 times */
  const yay = new Audio("yayy.mp3");
  yay.play();

  let count = 1;
  yay.addEventListener("ended", () => {
    if (count < 2) {
      count++;
      yay.currentTime = 0;
      yay.play();
    }
  });

  /* üéä Confetti */
  for (let i = 0; i < 150; i++) {
    const confetti = document.createElement("div");
    confetti.classList.add("confetti");
    confetti.style.left = Math.random() * window.innerWidth + "px";
    confetti.style.animationDuration = (2 + Math.random() * 3) + "s";
    confetti.style.backgroundColor =
      ["#ff4d88","#ff85a2","#ffd166","#06d6a0","#118ab2"][Math.floor(Math.random()*5)];
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 5000);
  }

  /* üíñ Success Overlay */
  const success = document.createElement("div");
  success.style.position = "fixed";
  success.style.inset = "0";
  success.style.display = "flex";
  success.style.flexDirection = "column";
  success.style.justifyContent = "center";
  success.style.alignItems = "center";
  success.style.background = "#ffe6f0";
  success.style.fontFamily = "'Pacifico', cursive";
  success.style.textAlign = "center";
  success.style.zIndex = "9999";

  success.innerHTML = `
    <img src="thanks.gif" style="width:300px;margin-bottom:30px;">
    <h1 style="color:#ff4d88;font-size:40px;">
      You Just Made Me The Happiest ‚ù§Ô∏è
    </h1>
  `;

  document.body.appendChild(success);
});
</script>


</body>
</html>
